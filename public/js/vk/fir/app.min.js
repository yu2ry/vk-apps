$(document).ready(function(){function o(a,b,c,d){$.ajax({url:a,type:b,data:c,success:function(a){d(a)}})}function p(){$(".word").html(j),w()}function q(a,b){return Math.floor(Math.random()*(b-a+1))+a}function r(a,b,c,d,e,f,g,h,i,j){this.y=a,this.x=b,this.top=c,this.right=d,this.bottom=e,this.left=f,this.image_on=g,this.image_off=h,this.type_figure=i,this.charge=j,this.degrees=0,this.skip_figure=0}function s(a,c){0!=b[a][c]&&(b[a][c].degrees+=90,"straight"==b[a][c].type_figure?1==b[a][c].top&&1==b[a][c].bottom?(b[a][c].top=0,b[a][c].right=1,b[a][c].bottom=0,b[a][c].left=1):1==b[a][c].right&&1==b[a][c].left&&(b[a][c].top=1,b[a][c].right=0,b[a][c].bottom=1,b[a][c].left=0):"star"==b[a][c].type_figure?1==b[a][c].bottom?(b[a][c].top=0,b[a][c].right=0,b[a][c].bottom=0,b[a][c].left=1):1==b[a][c].left?(b[a][c].top=1,b[a][c].right=0,b[a][c].bottom=0,b[a][c].left=0):1==b[a][c].top?(b[a][c].top=0,b[a][c].right=1,b[a][c].bottom=0,b[a][c].left=0):1==b[a][c].right&&(b[a][c].top=0,b[a][c].right=0,b[a][c].bottom=1,b[a][c].left=0):"curve_3"==b[a][c].type_figure?1==b[a][c].top&&1==b[a][c].left&&1==b[a][c].right?(b[a][c].top=1,b[a][c].right=1,b[a][c].bottom=1,b[a][c].left=0):1==b[a][c].top&&1==b[a][c].right&&1==b[a][c].bottom?(b[a][c].top=0,b[a][c].right=1,b[a][c].bottom=1,b[a][c].left=1):1==b[a][c].left&&1==b[a][c].right&&1==b[a][c].bottom?(b[a][c].top=1,b[a][c].right=0,b[a][c].bottom=1,b[a][c].left=1):1==b[a][c].left&&1==b[a][c].top&&1==b[a][c].bottom&&(b[a][c].top=1,b[a][c].right=1,b[a][c].bottom=0,b[a][c].left=1):"ball"==b[a][c].type_figure?1==b[a][c].top?(b[a][c].top=0,b[a][c].right=1,b[a][c].bottom=0,b[a][c].left=0):1==b[a][c].right?(b[a][c].top=0,b[a][c].right=0,b[a][c].bottom=1,b[a][c].left=0):1==b[a][c].bottom?(b[a][c].top=0,b[a][c].right=0,b[a][c].bottom=0,b[a][c].left=1):1==b[a][c].left&&(b[a][c].top=1,b[a][c].right=0,b[a][c].bottom=0,b[a][c].left=0):"curve_2"==b[a][c].type_figure&&(1==b[a][c].top&&1==b[a][c].right?(b[a][c].top=0,b[a][c].right=1,b[a][c].bottom=1,b[a][c].left=0):1==b[a][c].right&&1==b[a][c].bottom?(b[a][c].top=0,b[a][c].right=0,b[a][c].bottom=1,b[a][c].left=1):1==b[a][c].bottom&&1==b[a][c].left?(b[a][c].top=1,b[a][c].right=0,b[a][c].bottom=0,b[a][c].left=1):1==b[a][c].left&&1==b[a][c].top&&(b[a][c].top=1,b[a][c].right=1,b[a][c].bottom=0,b[a][c].left=0)))}function t(a,b,c){var e;if("cross"==c)e=new r(a,b,1,1,1,1,"cross_on","cross_off","cross",!1);else if("straight"==c)e=new r(a,b,1,0,1,0,"straight_on","straight_off","straight",!1);else if("curve_3"==c)e=new r(a,b,1,1,0,1,"curve_3_on","curve_3_off","curve_3",!1);else if("ball"==c){for(var g,h,f=["red","blue","green","yellow"],i=f[q(0,f.length-1)];i==d;)i=f[q(0,f.length-1)];switch(i){case"red":g="red",h="red";break;case"blue":g="blue",h="blue";break;case"green":g="green",h="green";break;case"yellow":g="yellow",h="yellow"}d=i,e=new r(a,b,1,0,0,0,g+"_on",h+"_off","ball",!1)}else"curve_2"==c?e=new r(a,b,1,1,0,0,"curve_2_on","curve_2_off","curve_2",!1):"star"==c&&(e=new r(a,b,0,0,1,0,"star_on","star_off","star",!1));return e}function u(){for(var a=[],b="",c=0;c<15;c++){a[c]=[];for(var d=0;d<15;d++)a[c][d]=0,b+="<div id='y_"+c+"_x_"+d+"' class='loc'></div>"}return $(".word").html(b),a[0][7]=1,a[1][7]=1,a[2][6]=1,a[2][7]=1,a[2][8]=1,a[3][5]=1,a[3][6]=1,a[3][7]=1,a[3][8]=1,a[3][9]=1,a[4][4]=1,a[4][5]=1,a[4][6]=1,a[4][7]=1,a[4][8]=1,a[4][9]=1,a[4][10]=1,a[5][3]=1,a[5][4]=1,a[5][5]=1,a[5][6]=1,a[5][7]=1,a[5][8]=1,a[5][9]=1,a[5][10]=1,a[5][11]=1,a[6][3]=1,a[6][4]=1,a[6][5]=1,a[6][6]=1,a[6][7]=1,a[6][8]=1,a[6][9]=1,a[6][10]=1,a[6][11]=1,a[7][2]=1,a[7][3]=1,a[7][4]=1,a[7][5]=1,a[7][6]=1,a[7][7]=1,a[7][8]=1,a[7][9]=1,a[7][10]=1,a[7][11]=1,a[7][12]=1,a[8][2]=1,a[8][3]=1,a[8][4]=1,a[8][5]=1,a[8][6]=1,a[8][7]=1,a[8][8]=1,a[8][9]=1,a[8][10]=1,a[8][11]=1,a[8][12]=1,a[9][1]=1,a[9][2]=1,a[9][3]=1,a[9][4]=1,a[9][5]=1,a[9][6]=1,a[9][7]=1,a[9][8]=1,a[9][9]=1,a[9][10]=1,a[9][11]=1,a[9][12]=1,a[9][13]=1,a[10][1]=1,a[10][2]=1,a[10][3]=1,a[10][4]=1,a[10][5]=1,a[10][6]=1,a[10][7]=1,a[10][8]=1,a[10][9]=1,a[10][10]=1,a[10][11]=1,a[10][12]=1,a[10][13]=1,a[11][1]=1,a[11][2]=1,a[11][3]=1,a[11][4]=1,a[11][5]=1,a[11][6]=1,a[11][7]=1,a[11][8]=1,a[11][9]=1,a[11][10]=1,a[11][11]=1,a[11][12]=1,a[11][13]=1,a[12][0]=1,a[12][1]=1,a[12][2]=1,a[12][3]=1,a[12][4]=1,a[12][5]=1,a[12][6]=1,a[12][7]=1,a[12][8]=1,a[12][9]=1,a[12][10]=1,a[12][11]=1,a[12][12]=1,a[12][13]=1,a[12][14]=1,a[13][0]=1,a[13][1]=1,a[13][2]=1,a[13][3]=1,a[13][4]=1,a[13][5]=1,a[13][6]=1,a[13][7]=1,a[13][8]=1,a[13][9]=1,a[13][10]=1,a[13][11]=1,a[13][12]=1,a[13][13]=1,a[13][14]=1,a[14][7]=1,a}function v(a,c){if(1==b[14][7].top&&1==b[13][7].bottom){if(13==a&&7==c&&(b[13][7].charge=!0,b[a][c-1].skip=1,$("#y_13_x_7").removeClass().addClass("loc "+b[13][7].image_on)),"ball"!=b[a][c].type_figure){if(0!=c&&1==b[a][c].charge&&1==b[a][c].left&&0==b[a][c-1].skip_figure&&1==b[a][c-1].right){b[a][c-1].charge=!0,b[a][c-1].skip_figure=1;var d=c-1;$("#y_"+a+"_x_"+d).removeClass().addClass("loc "+b[a][d].image_on),v(a,d)}if(0!=a&&1==b[a][c].charge&&1==b[a][c].top&&1==b[a-1][c].bottom&&0==b[a-1][c].skip_figure){b[a-1][c].charge=!0,b[a-1][c].skip_figure=1;var e=a-1;$("#y_"+e+"_x_"+c).removeClass().addClass("loc "+b[e][c].image_on),v(e,c)}if(14!=c&&1==b[a][c].charge&&1==b[a][c].right&&1==b[a][c+1].left&&0==b[a][c+1].skip_figure){b[a][c+1].charge=!0,b[a][c+1].skip_figure=1;var d=c+1;$("#y_"+a+"_x_"+d).removeClass().addClass("loc "+b[a][d].image_on),v(a,d)}if(13!=a&&1==b[a][c].charge&&1==b[a][c].bottom&&1==b[a+1][c].top&&0==b[a+1][c].skip_figure){b[a+1][c].charge=!0,b[a+1][c].skip_figure=1;var e=a+1;$("#y_"+e+"_x_"+c).removeClass().addClass("loc "+b[e][c].image_on),v(e,c)}}}else{for(var f=0;f<b.length;f++)for(var g=0;g<b[f].length;g++)0!=b[f][g]&&($("#y_"+f+"_x_"+g).removeClass().addClass("loc "+b[f][g].image_off),b[f][g].charge=!1);for(var f=0;f<b.length;f++)for(var g=0;g<b[f].length;g++)0!=b[f][g]&&(b[f][g].skip_figure=0,b[f][g].charge=!1);b[14][7].charge=!0}}function w(){for(var a=0;a<b.length;a++)for(var c=0;c<b[a].length;c++)0!=b[a][c]&&(1==b[a][c].charge?$("#y_"+a+"_x_"+c).removeClass().addClass("loc "+b[a][c].image_on).css("cursor","pointer"):$("#y_"+a+"_x_"+c).removeClass().addClass("loc "+b[a][c].image_off).css("cursor","pointer"),$("#y_"+b[a][c].y+"_x_"+b[a][c].x).rotate(b[a][c].degrees))}function x(){var a=!0;y(),v(13,7);for(var c=0;c<b.length;c++)for(var d=0;d<b[c].length;d++)if(0!=b[c][d]&&0==b[c][d].charge){a=!1;break}return a}function y(){for(var a=0;a<b.length;a++)for(var c=0;c<b[a].length;c++)0!=b[a][c]&&(b[a][c].skip_figure=0,b[a][c].charge=!1);b[14][7].charge=!0}function z(a,c){var d=!0;if(b[a][c]=t(a,c,"ball"),0==x()){d=!1;for(var e=0;e<3;e++)s(a,c),x()&&(d=!0,e=3)}return d}function A(){for(var a=["curve_2","straight","curve_3","cross"],c=2;c<=b.length-2;c++)for(var d=0;d<b[c].length;d++)if(0!=b[c][d]&&"ball"!=b[c][d].type_figure)for(var e=!0;e;){for(var f=0;f<a.length;f++){if(b[c][d]=t(c,d,a[f]),x()){e=!1,f=5;break}for(var g=0;g<=3;g++)if(s(c,d),x()){e=!1,f=5;break}}e=!1}}function B(){var a=0,c=[];k=3,$("#hint button").text("Подсказки ("+k+")"),$("#hint button").css("cursor","pointer");for(var d=2;d<=b.length-2;d++)for(var e=0;e<b[d].length;e++)0!=b[d][e]&&(b[d][e]=t(d,e,"cross"),(13!=d&&7!=e||1!=d&&7!=e||2!=d&&7!=e)&&(c[a++]=d+"/"+e));for(b[0][7]=t(0,7,"star"),b[1][7]=t(1,7,"straight"),b[14][7]=t(14,7,"straight"),b[14][7].charge=!0;0!=f;){var g=q(0,c.length-1),h=c[g].split("/");z(h[0],h[1])?(c.splice(g-1,1),f--):(b[h[0]][h[1]]=t(h[0],h[1],"cross"),c.splice(g,1),f++)}A(),v(13,7),w();for(var d=2;d<=b.length-2;d++)for(var e=0;e<b[d].length;e++)if(0!=b[d][e]&&0!=b[d][e]&&"curve_2"==b[d][e].type_figure){if(1==b[d][e].top&&1==b[d][e].right&&0==b[d-1][e]){var j=b[d][e];b[d][e]=t(d,e,"ball"),s(d,e),0==x()&&(b[d][e]=j)}if(1==b[d][e].top&&1==b[d][e].right&&0==b[d-1][e].bottom){var j=b[d][e];b[d][e]=t(d,e,"ball"),s(d,e),0==x()&&(b[d][e]=j)}}w(),i=$(".word").html();for(var d=2;d<=b.length-2;d++)for(var e=0;e<b[d].length;e++)if(0!=b[d][e])for(var l=0,m=q(0,3);l<m;l++)s(d,e);y(),v(13,7),w(),$(".loc").show()}function C(a){o("/vk/fir/rating","post",a,function(b){if("success"==b.status){var c=b.data.users.length,d="";if(0==c)d="<div class='rating_not'>Рейтинг пуст :(</div><div id='invite' style='float:left; margin-top:10px; margin-left:130px;'></div>",$("#rating_content").html(d);else{for(var e=a.type,f="",g=[],h=7*(parseInt(b.data.page)-1)+1,i=0;i<c;i++)f+="<div class = 'tablo'><div id='tablo_number'><button>"+(i+h)+"</button></div><div id='tablo_avatar' ><a href='https://vk.com/id"+b.data.users[i].vk_id+"' target='_blank'><img class='table_avatar_"+b.data.users[i].vk_id+"' style='width:100%;height:100%' src='/images/VK/load_avatar.gif'/></a></div><div id='tablo_first_name_and_last_name'><div id='tablo_first_name'><button class='table_first_name_"+b.data.users[i].vk_id+"'></button></div><div id='tablo_first_name'><button class='table_last_name_"+b.data.users[i].vk_id+"'></button></div></div><div id='tablo_coutn'>"+b.data.users[i].count_firs+"</div></div>",g.push(b.data.users[i].vk_id);$("#rating_content").html(f),VK.api("users.get",{uids:g,fields:"id,photo_50,first_name,last_name"},function(a){for(var b=0,c=a.response.length;b<c;b++)$(".table_avatar_"+a.response[b].uid).attr("src",a.response[b].photo_50),$(".table_first_name_"+a.response[b].uid).text(a.response[b].first_name),$(".table_last_name_"+a.response[b].uid).text(a.response[b].last_name)}),d=b.data.next?1==b.data.page?"<div class='rating_button' id='invite'></div><div style='margin-left: 20px' type='"+e+"' page='"+(parseInt(b.data.page)+1)+"' class='rating_button_next rating_button'></div>":"<div class='rating_button rating_button_prev' type='"+e+"' page='"+(parseInt(b.data.page)-1)+"' id='prev_rating'></div><div style='margin-left: 20px' type='"+e+"' page='"+(parseInt(b.data.page)+1)+"' class='rating_button_next rating_button'></div>":1==b.data.page?"<div class='rating_button' id='invite'></div>":"<div class='rating_button rating_button_prev' type='"+e+"' page='"+(parseInt(b.data.page)-1)+"'></div><div class='rating_button' style='margin-left: 20px' id='invite'></div>",$("#rating_content").append(d)}}else alert(b.message)})}function D(a){switch(a.type){case"today":$("#rating_today").removeClass("rating_today_off").addClass("rating_today_on"),$("#rating_friends").removeClass("rating_friends_on").addClass("rating_friends_off"),$("#rating_all").removeClass("rating_all_on").addClass("rating_all_off");break;case"all":$("#rating_all").removeClass("rating_all_off").addClass("rating_all_on"),$("#rating_today").removeClass("rating_today_on").addClass("rating_today_off"),$("#rating_friends").removeClass("rating_friends_on").addClass("rating_friends_off");break;case"friends":$("#rating_friends").removeClass("rating_friends_off").addClass("rating_friends_on"),$("#rating_all").removeClass("rating_all_on").addClass("rating_all_off"),$("#rating_today").removeClass("rating_today_on").addClass("rating_today_off")}C(a)}const a="/images/VK/";var c,d,e,i,j,l,b=u(),f=30,k=3;$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var m=new Date,n=m.getHours();n>=17||n<=8?($(".fon").addClass("fon-night"),$("#snegovik img").attr("src",a+"snegovik_noch.png"),$("#avatar").addClass("avatar-night")):($(".fon").addClass("fon-day"),$("#snegovik img").attr("src",a+"snegovik.png"),$("#avatar").addClass("avatar-day")),VK.api("users.get",{fields:"id,photo_100,first_name,last_name"},function(b){$("#avatar img").attr("src",b.response[0].photo_100),$("#first_name").text(b.response[0].first_name),$("#last_name").text(b.response[0].last_name),c=b.response[0].uid,"new"==$("body").attr("user")?$(".word").html("<div id='info' style='width:480px; height:340px;'></div><div id='bat'></div>"):($(".word").html("<div id='info' style='width:480px; height:340px;'></div><div id='bat'></div>"),$("#info").css("background-image","url('"+a+"comeback.png')"));var d=parseInt($("#stolb").text());0!=d&&1!=d&&2!=d||(d=3),$("#lvl button").text(parseFloat((d/3).toFixed(1)))}),VK.api("friends.getAppUsers",{},function(a){l=a}),$("#share").on("click",function(){VK.api("friends.get",{fields:"first_name",order:"random",count:1},function(a){VK.api("wall.post",{owner_id:a.response[0].user_id,message:"Пора спасать Ёлочки "+a.response[0].first_name+"\nhttps://vk.com/app5144297",attachment:"photo-107246498_393534100"})})}),$(document).on("click","#bat",function(){$("#info").remove(),$(this).remove(),$("#game_start").click(),$("#game_start").click()}),$(document).on("click","#bat",function(){$(".word").html(""),u(),f=30,$("#hint").show(),B()}),$(document).on("mousedown",".loc",function(){var a=$(this).attr("id"),c=a.split("_"),d=c[1],e=c[3];if(0!=b[d][e]){b[d][e].degrees+=90,"straight"==b[d][e].type_figure?1==b[d][e].top&&1==b[d][e].bottom?(b[d][e].top=0,b[d][e].right=1,b[d][e].bottom=0,b[d][e].left=1):1==b[d][e].right&&1==b[d][e].left&&(b[d][e].top=1,b[d][e].right=0,b[d][e].bottom=1,b[d][e].left=0):"star"==b[d][e].type_figure?1==b[d][e].bottom?(b[d][e].top=0,b[d][e].right=0,b[d][e].bottom=0,b[d][e].left=1):1==b[d][e].left?(b[d][e].top=1,b[d][e].right=0,b[d][e].bottom=0,b[d][e].left=0):1==b[d][e].top?(b[d][e].top=0,b[d][e].right=1,b[d][e].bottom=0,b[d][e].left=0):1==b[d][e].right&&(b[d][e].top=0,b[d][e].right=0,b[d][e].bottom=1,b[d][e].left=0):"curve_3"==b[d][e].type_figure?1==b[d][e].top&&1==b[d][e].left&&1==b[d][e].right?(b[d][e].top=1,b[d][e].right=1,b[d][e].bottom=1,b[d][e].left=0):1==b[d][e].top&&1==b[d][e].right&&1==b[d][e].bottom?(b[d][e].top=0,b[d][e].right=1,b[d][e].bottom=1,b[d][e].left=1):1==b[d][e].left&&1==b[d][e].right&&1==b[d][e].bottom?(b[d][e].top=1,b[d][e].right=0,b[d][e].bottom=1,b[d][e].left=1):1==b[d][e].left&&1==b[d][e].top&&1==b[d][e].bottom&&(b[d][e].top=1,b[d][e].right=1,b[d][e].bottom=0,b[d][e].left=1):"ball"==b[d][e].type_figure?1==b[d][e].top?(b[d][e].top=0,b[d][e].right=1,b[d][e].bottom=0,b[d][e].left=0):1==b[d][e].right?(b[d][e].top=0,b[d][e].right=0,b[d][e].bottom=1,b[d][e].left=0):1==b[d][e].bottom?(b[d][e].top=0,b[d][e].right=0,b[d][e].bottom=0,b[d][e].left=1):1==b[d][e].left&&(b[d][e].top=1,b[d][e].right=0,b[d][e].bottom=0,b[d][e].left=0):"curve_2"==b[d][e].type_figure&&(1==b[d][e].top&&1==b[d][e].right?(b[d][e].top=0,b[d][e].right=1,b[d][e].bottom=1,b[d][e].left=0):1==b[d][e].right&&1==b[d][e].bottom?(b[d][e].top=0,b[d][e].right=0,b[d][e].bottom=1,b[d][e].left=1):1==b[d][e].bottom&&1==b[d][e].left?(b[d][e].top=1,b[d][e].right=0,b[d][e].bottom=0,b[d][e].left=1):1==b[d][e].left&&1==b[d][e].top&&(b[d][e].top=1,b[d][e].right=1,b[d][e].bottom=0,b[d][e].left=0));for(var f=0;f<b.length;f++)for(var g=0;g<b[f].length;g++)0==b[f][g]&&1!=b[f][g]||($("#y_"+f+"_x_"+g).removeClass().addClass("loc "+b[f][g].image_off).css("cursor","pointer"),b[f][g].skip_figure=0,b[f][g].charge=!1);$("#y_14_x_7").removeClass().addClass("loc "+b[14][7].image_on),b[14][7].charge=!0,v(13,7);for(var h=!0,f=0;f<b.length;f++)for(var g=0;g<b[f].length;g++)if((0!=b[f][g]&&"ball"==b[f][g].type_figure||0!=b[f][g]&&"star"==b[f][g].type_figure)&&0==b[f][g].charge){h=!1;break}h&&(VK.api("users.get",{fields:"sex"},function(a){o("/vk/fir/add","post",{vk_id:a.response[0].uid},function(b){if("success"==b.status){var c=b.data.count_firs;0!=c&&1!=c&&2!=c||(c=3);var d=parseFloat(parseFloat(c/3).toFixed(1));if($("#stolb div").text(b.data.count_firs),$("#lvl button").text(d),Number.isInteger(d)){var e;e=1==a.response[0].sex?"достигла "+d:"достиг "+d,VK.api("wall.post",{message:"Я "+e+' уровня в игре "Ёлочка, гори" https://vk.com/app5144297',attachment:"photo-107246498_393534100"})}else{var e="собрал";1==a.response[0].sex&&(e="собрала"),1==b.data.count_firs?VK.api("wall.post",{message:"Я "+e+' свою первую Ёлочку в приложении "Ёлочка, гори", что бы спасти Новый Год https://vk.com/app5144297',attachment:"photo-107246498_393534100"}):VK.api("wall.post",{message:"Я "+e+" свою "+b.data.count_firs+'-ую Ёлочку в приложении "Ёлочка, гори", что бы спасти Новый Год https://vk.com/app5144297',attachment:"photo-107246498_393534100"})}}else alert(a.message)})}),$(".word").html("<div id='info_flag' style='width:480px; height:340px;'></div><div id='bat'></div>")),$("#y_14_x_7").addClass(b[14][7].image_on),$("#y_"+b[d][e].y+"_x_"+b[d][e].x).rotate({animateTo:b[d][e].degrees})}}),$(document).on("click","#game_start",function(){$(this).remove(),B()}),$(document).on("click","#rating",function(){e=$(".word").html(),$(this).css("background-image","url('"+a+"play1.png')"),$(this).attr("id","rating_game");var b="<div id='panel_rating' style='width:100%;height:37px;'><div id='rating_today'></div><div id='rating_all'></div><div id='rating_friends'></div></div><div id='rating_content'></div>";$(".word").html(b),$(".elka").css("background","transparent"),$(".loc").hide(),$("#hint").hide(),$("#rating_today").click()}),$(document).on("click","#rating_game",function(){$("#panel_rating").remove(),$("#rating_content").remove(),$(this).attr("id","rating"),$(this).css("background-image","url('"+a+"reyting.png')"),$(".elka").css("background-image","url('"+a+"pine1_1.png')"),$(".word").html(e),v(13,7),$(".loc").show(),w(),$("#hint").show()}),$(document).on("click","#invite",function(){VK.callMethod("showInviteBox")}),$(document).on("click","#hint",function(){k>=1?(j=$(".word").html(),$(".word").html(i),setTimeout(p,1200),$("#hint button").text("Подсказки ("+--k+")")):$("#hint button").css("cursor","default"),0==k&&$("#hint button").css("cursor","default")}),$(document).on("click",".rating_button_next",function(){C({type:$(this).attr("type"),page:$(this).attr("page")})}),$(document).on("click",".rating_button_prev",function(){C({type:$(this).attr("type"),page:$(this).attr("page")})}),$(document).on("click","#rating_today",function(){D({type:"today",page:1})}),$(document).on("click","#rating_all",function(){D({type:"all",page:1})}),$(document).on("click","#rating_friends",function(){D({type:"friends",page:1,vk_ids:l})})});